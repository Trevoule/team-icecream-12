{"version":3,"sources":["js/slider.js"],"names":["multiItemSlider","selector","config","_mainElement","_indicatorItems","document","querySelector","_sliderWrapper","_sliderItems","querySelectorAll","_wrapperWidth","parseFloat","getComputedStyle","width","_itemWidth","_html","innerHTML","_indexIndicator","_maxIndexIndicator","length","_positionLeftItem","_transform","_step","_items","_interval","_states","active","minWidth","count","_config","isCycling","direction","interval","pause","key","forEach","item","index","push","position","transform","_setActive","_index","body","clientWidth","arr","getItemMin","indexItem","getItemMax","getMin","getMax","_transformItem","nextItem","element","rect","vWidth","vHeight","elemFromPoint","currentIndicator","getBoundingClientRect","window","innerWidth","doc","documentElement","innerHeight","clientHeight","x","y","elementFromPoint","right","bottom","left","top","contains","style","classList","remove","add","_cycle","setInterval","_controlClick","e","target","preventDefault","clearInterval","getAttribute","to","i","_slideTo","parseInt","_handleVisibilityChange","visibilityState","_addIndicators","sliderIndicators","createElement","sliderIndicatorsItem","setAttribute","appendChild","addEventListener","_getActive","stop","cycle","slider"],"mappings":";AAAA,aACA,IAAIA,EAAmB,WAuBd,OAAA,SAAUC,EAAUC,GACrBC,IAaFC,EAbED,EAAeE,SAASC,cAAcL,GACxCM,EAAiBJ,EAAaG,cAAc,oBAC5CE,EAAeL,EAAaM,iBAAiB,iBAM7CC,GALkBP,EAAaM,iBAAiB,oBAC3BN,EAAaG,cAAc,yBAC1BH,EAAaG,cACjC,0BAEcK,WAAWC,iBAAiBL,GAAgBM,QAC5DC,EAAaH,WAAWC,iBAAiBJ,EAAa,IAAIK,OAC1DE,EAAQZ,EAAaa,UACrBC,EAAkB,EAClBC,EAAqBV,EAAaW,OAAS,EAE3CC,EAAoB,EACpBC,EAAa,EACbC,EAASR,EAAaJ,EAAiB,IACvCa,EAAS,GACTC,EAAY,EACZC,EAAU,CAAC,CAAEC,QAAQ,EAAOC,SAAU,EAAGC,MAAO,IAChDC,EAAU,CACRC,WAAW,EACXC,UAAW,QACXC,SAAU,IACVC,OAAO,GAGN,IAAA,IAAIC,KAAOhC,EACVgC,KAAOL,IACTA,EAAQK,GAAOhC,EAAOgC,IAI1B1B,EAAa2B,QAAQ,SAAUC,EAAMC,GACnCd,EAAOe,KAAK,CAAEF,KAAMA,EAAMG,SAAUF,EAAOG,UAAW,MAGpDC,IAAAA,EAAa,WACXC,IAAAA,EAAS,EACT7B,EAAQF,WAAWN,SAASsC,KAAKC,aACrCnB,EAAQU,QAAQ,SAAUC,EAAMC,EAAOQ,GACrCpB,EAAQY,GAAOX,QAAS,EACpBb,GAASY,EAAQY,GAAOV,WAAUe,EAASL,KAEjDZ,EAAQiB,GAAQhB,QAAS,GAavBa,EAAW,CACbO,WAAY,WACNC,IAAAA,EAAY,EAMTA,OALPxB,EAAOY,QAAQ,SAAUC,EAAMC,GACzBD,EAAKG,SAAWhB,EAAOwB,GAAWR,WACpCQ,EAAYV,KAGTU,GAETC,WAAY,WACND,IAAAA,EAAY,EAMTA,OALPxB,EAAOY,QAAQ,SAAUC,EAAMC,GACzBD,EAAKG,SAAWhB,EAAOwB,GAAWR,WACpCQ,EAAYV,KAGTU,GAETE,OAAQ,WACC1B,OAAAA,EAAOgB,EAASO,cAAcP,UAEvCW,OAAQ,WACC3B,OAAAA,EAAOgB,EAASS,cAAcT,WAIrCY,EAAiB,SAAUpB,GACzBqB,IAAAA,EA5GmBC,EACrBC,EACFC,EACAC,EACAC,EAyGEC,EAAmBzC,GA5GnBqC,GADqBD,EA8GAlD,GA7GNwD,wBACjBJ,EAASK,OAAOC,YAAcC,IAAIC,gBAAgBnB,YAClDY,EAAUI,OAAOI,aAAeF,IAAIC,gBAAgBE,aACpDR,EAAgB,SAAUS,EAAGC,GACpB9D,OAAAA,SAAS+D,iBAAiBF,EAAGC,IAGtCb,EAAKe,MAAQ,GACbf,EAAKgB,OAAS,GACdhB,EAAKiB,KAAOhB,GACZD,EAAKkB,IAAMhB,KAIXH,EAAQoB,SAAShB,EAAcH,EAAKiB,KAAMjB,EAAKkB,OAC/CnB,EAAQoB,SAAShB,EAAcH,EAAKe,MAAOf,EAAKkB,OAChDnB,EAAQoB,SAAShB,EAAcH,EAAKe,MAAOf,EAAKgB,UAChDjB,EAAQoB,SAAShB,EAAcH,EAAKiB,KAAMjB,EAAKgB,aA+F7B,UAAdvC,MACFX,EAEsBV,EAAgBI,EAAa,EACjDyB,EAASW,WAETE,EAAWb,EAASO,aACpBvB,EAAO6B,GAAUb,SAAWA,EAASW,SAAW,EAChD3B,EAAO6B,GAAUZ,WAA6B,IAAhBjB,EAAOJ,OACrCI,EAAO6B,GAAUhB,KAAKsC,MAAMlC,UAC1B,cAAgBjB,EAAO6B,GAAUZ,UAAY,MAEjDnB,GAAcC,GACdL,GAAoC,GACdC,IACpBD,EAAkB,IAGJ,SAAdc,MACFX,EACwBmB,EAASU,WAC/BG,EAAWb,EAASS,aACpBzB,EAAO6B,GAAUb,SAAWA,EAASU,SAAW,EAChD1B,EAAO6B,GAAUZ,WAA6B,IAAhBjB,EAAOJ,OACrCI,EAAO6B,GAAUhB,KAAKsC,MAAMlC,UAC1B,cAAgBjB,EAAO6B,GAAUZ,UAAY,MAEjDnB,GAAcC,GACdL,GAAoC,GACd,IACpBA,EAAkBC,IAGtBX,EAAemE,MAAMlC,UAAY,cAAgBnB,EAAa,KAC9DjB,EAAgBsD,GAAkBiB,UAAUC,OAAO,UACnDxE,EAAgBa,GAAiB0D,UAAUE,IAAI,YAY7CC,EAAS,SAAU/C,GAChBF,EAAQC,YAGbN,EAAYuD,YAAY,WACtB5B,EAAepB,IACdF,EAAQG,YAGTgD,EAAgB,SAAUC,GACxBA,GAAAA,EAAEC,OAAOP,UAAUF,SAAS,mBAAoB,CAClDQ,EAAEE,iBACEpD,IAAAA,EAAYkD,EAAEC,OAAOP,UAAUF,SAAS,yBACxC,QACA,OACJtB,EAAepB,GACfqD,cAAc5D,GACdsD,EAAOjD,EAAQE,WAEbkD,EAAEC,OAAOG,aAAa,mBACxBJ,EAAEE,iBA7BS,SAAUG,GAGhBA,IAFHC,IAAAA,EAAI,EACNxD,EAAYuD,EAAKrE,EAAkB,QAAU,OACxCqE,IAAOrE,GAAmBsE,GAAKrE,GACpCiC,EAAepB,GACfwD,IAyBAC,CAASC,SAASR,EAAEC,OAAOG,aAAa,mBACxCD,cAAc5D,GACdsD,EAAOjD,EAAQE,aAIf2D,EAA0B,WACK,WAA7BrF,SAASsF,gBACXP,cAAc5D,IAEd4D,cAAc5D,GACdsD,EAAOjD,EAAQE,aA0Df6D,EAAiB,WACfC,IAAAA,EAAmBxF,SAASyF,cAAc,MAC9CD,EAAiBlB,UAAUE,IAAI,sBAC1B,IAAA,IAAIU,EAAI,EAAGA,EAAI/E,EAAaW,OAAQoE,IAAK,CACxCQ,IAAAA,EAAuB1F,SAASyF,cAAc,MACxC,IAANP,GACFQ,EAAqBpB,UAAUE,IAAI,UAErCkB,EAAqBC,aAAa,gBAAiBT,GACnDM,EAAiBI,YAAYF,GAE/B5F,EAAa8F,YAAYJ,GACzBzF,EAAkBD,EAAaM,iBAC7B,6BAcG,OATPmF,IA/CEzF,EAAa+F,iBAAiB,QAASlB,GACnCnD,EAAQI,OAASJ,EAAQC,YAC3B3B,EAAa+F,iBAAiB,aAAc,WAC1Cd,cAAc5D,KAEhBrB,EAAa+F,iBAAiB,aAAc,WAC1Cd,cAAc5D,GACdsD,EAAOjD,EAAQE,cAInB1B,SAAS6F,iBACP,mBACAR,GACA,GAEF9B,OAAOsC,iBAAiB,SAAU,WAC5BxD,IAAAA,EAAS,EACX7B,EAAQF,WAAWN,SAASsC,KAAKC,aACnCnB,EAAQU,QAAQ,SAAUC,EAAMC,EAAOQ,GACjChC,GAASY,EAAQY,GAAOV,WAAUe,EAASL,KAE7CK,IA7KS,WACXA,IAAAA,EAMGA,OALPjB,EAAQU,QAAQ,SAAUC,EAAMC,EAAOQ,GACjCpB,EAAQY,GAAOX,SACjBgB,EAASL,KAGNK,EAsKUyD,KACb1D,IA/CJ2C,cAAc5D,GACdrB,EAAaa,UAAYD,EACzBR,EAAiBJ,EAAaG,cAAc,oBAC5CE,EAAeL,EAAaM,iBAAiB,iBAC3BN,EAAaM,iBAAiB,oBAC3BN,EAAaG,cAAc,yBAC1BH,EAAaG,cACjC,0BAEFI,EAAgBC,WAAWC,iBAAiBL,GAAgBM,OAC5DC,EAAaH,WAAWC,iBAAiBJ,EAAa,IAAIK,OAC1DO,EAAoB,EACpBC,EAAa,EACbJ,EAAkB,EAClBC,EAAqBV,EAAaW,OAAS,EAC3CG,EAASR,EAAaJ,EAAiB,IACvCa,EAAS,GACTf,EAAa2B,QAAQ,SAAUC,EAAMC,GACnCd,EAAOe,KAAK,CAAEF,KAAMA,EAAMG,SAAUF,EAAOG,UAAW,MAExDoD,OAuD+B,YAA7BvF,SAASsF,iBACXb,EAAOjD,EAAQE,WAEjBU,IAEO,CACL4B,MAAO,WACLlB,EAAe,UAEjBoB,KAAM,WACJpB,EAAe,SAEjBiD,KAAM,WACJvE,EAAQC,WAAY,EACpBsD,cAAc5D,IAEhB6E,MAAO,WACLxE,EAAQC,WAAY,EACpBsD,cAAc5D,GACdsD,OApSe,GA0SnBwB,EAAStG,EAAgB,UAAW,CACtC8B,WAAW","file":"slider.9ea4312e.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\nvar multiItemSlider = (function () {\r\n  function _isElementVisible(element) {\r\n    var rect = element.getBoundingClientRect(),\r\n      vWidth = window.innerWidth || doc.documentElement.clientWidth,\r\n      vHeight = window.innerHeight || doc.documentElement.clientHeight,\r\n      elemFromPoint = function (x, y) {\r\n        return document.elementFromPoint(x, y);\r\n      };\r\n    if (\r\n      rect.right < 0 ||\r\n      rect.bottom < 0 ||\r\n      rect.left > vWidth ||\r\n      rect.top > vHeight\r\n    )\r\n      return false;\r\n    return (\r\n      element.contains(elemFromPoint(rect.left, rect.top)) ||\r\n      element.contains(elemFromPoint(rect.right, rect.top)) ||\r\n      element.contains(elemFromPoint(rect.right, rect.bottom)) ||\r\n      element.contains(elemFromPoint(rect.left, rect.bottom))\r\n    );\r\n  }\r\n\r\n  return function (selector, config) {\r\n    var _mainElement = document.querySelector(selector),\r\n      _sliderWrapper = _mainElement.querySelector('.slider__wrapper'),\r\n      _sliderItems = _mainElement.querySelectorAll('.slider__item'),\r\n      _sliderControls = _mainElement.querySelectorAll('.slider__control'),\r\n      _sliderControlLeft = _mainElement.querySelector('.slider__control_left'),\r\n      _sliderControlRight = _mainElement.querySelector(\r\n        '.slider__control_right',\r\n      ),\r\n      _wrapperWidth = parseFloat(getComputedStyle(_sliderWrapper).width),\r\n      _itemWidth = parseFloat(getComputedStyle(_sliderItems[0]).width),\r\n      _html = _mainElement.innerHTML,\r\n      _indexIndicator = 0,\r\n      _maxIndexIndicator = _sliderItems.length - 1,\r\n      _indicatorItems,\r\n      _positionLeftItem = 0,\r\n      _transform = 0,\r\n      _step = (_itemWidth / _wrapperWidth) * 100,\r\n      _items = [],\r\n      _interval = 0,\r\n      _states = [{ active: false, minWidth: 0, count: 1 }],\r\n      _config = {\r\n        isCycling: false,\r\n        direction: 'right',\r\n        interval: 4000,\r\n        pause: true,\r\n      };\r\n\r\n    for (var key in config) {\r\n      if (key in _config) {\r\n        _config[key] = config[key];\r\n      }\r\n    }\r\n\r\n    _sliderItems.forEach(function (item, index) {\r\n      _items.push({ item: item, position: index, transform: 0 });\r\n    });\r\n\r\n    var _setActive = function () {\r\n      var _index = 0;\r\n      var width = parseFloat(document.body.clientWidth);\r\n      _states.forEach(function (item, index, arr) {\r\n        _states[index].active = false;\r\n        if (width >= _states[index].minWidth) _index = index;\r\n      });\r\n      _states[_index].active = true;\r\n    };\r\n\r\n    var _getActive = function () {\r\n      var _index;\r\n      _states.forEach(function (item, index, arr) {\r\n        if (_states[index].active) {\r\n          _index = index;\r\n        }\r\n      });\r\n      return _index;\r\n    };\r\n\r\n    var position = {\r\n      getItemMin: function () {\r\n        var indexItem = 0;\r\n        _items.forEach(function (item, index) {\r\n          if (item.position < _items[indexItem].position) {\r\n            indexItem = index;\r\n          }\r\n        });\r\n        return indexItem;\r\n      },\r\n      getItemMax: function () {\r\n        var indexItem = 0;\r\n        _items.forEach(function (item, index) {\r\n          if (item.position > _items[indexItem].position) {\r\n            indexItem = index;\r\n          }\r\n        });\r\n        return indexItem;\r\n      },\r\n      getMin: function () {\r\n        return _items[position.getItemMin()].position;\r\n      },\r\n      getMax: function () {\r\n        return _items[position.getItemMax()].position;\r\n      },\r\n    };\r\n\r\n    var _transformItem = function (direction) {\r\n      var nextItem,\r\n        currentIndicator = _indexIndicator;\r\n      if (!_isElementVisible(_mainElement)) {\r\n        return;\r\n      }\r\n      if (direction === 'right') {\r\n        _positionLeftItem++;\r\n        if (\r\n          _positionLeftItem + _wrapperWidth / _itemWidth - 1 >\r\n          position.getMax()\r\n        ) {\r\n          nextItem = position.getItemMin();\r\n          _items[nextItem].position = position.getMax() + 1;\r\n          _items[nextItem].transform += _items.length * 100;\r\n          _items[nextItem].item.style.transform =\r\n            'translateX(' + _items[nextItem].transform + '%)';\r\n        }\r\n        _transform -= _step;\r\n        _indexIndicator = _indexIndicator + 1;\r\n        if (_indexIndicator > _maxIndexIndicator) {\r\n          _indexIndicator = 0;\r\n        }\r\n      }\r\n      if (direction === 'left') {\r\n        _positionLeftItem--;\r\n        if (_positionLeftItem < position.getMin()) {\r\n          nextItem = position.getItemMax();\r\n          _items[nextItem].position = position.getMin() - 1;\r\n          _items[nextItem].transform -= _items.length * 100;\r\n          _items[nextItem].item.style.transform =\r\n            'translateX(' + _items[nextItem].transform + '%)';\r\n        }\r\n        _transform += _step;\r\n        _indexIndicator = _indexIndicator - 1;\r\n        if (_indexIndicator < 0) {\r\n          _indexIndicator = _maxIndexIndicator;\r\n        }\r\n      }\r\n      _sliderWrapper.style.transform = 'translateX(' + _transform + '%)';\r\n      _indicatorItems[currentIndicator].classList.remove('active');\r\n      _indicatorItems[_indexIndicator].classList.add('active');\r\n    };\r\n\r\n    var _slideTo = function (to) {\r\n      var i = 0,\r\n        direction = to > _indexIndicator ? 'right' : 'left';\r\n      while (to !== _indexIndicator && i <= _maxIndexIndicator) {\r\n        _transformItem(direction);\r\n        i++;\r\n      }\r\n    };\r\n\r\n    var _cycle = function (direction) {\r\n      if (!_config.isCycling) {\r\n        return;\r\n      }\r\n      _interval = setInterval(function () {\r\n        _transformItem(direction);\r\n      }, _config.interval);\r\n    };\r\n\r\n    var _controlClick = function (e) {\r\n      if (e.target.classList.contains('slider__control')) {\r\n        e.preventDefault();\r\n        var direction = e.target.classList.contains('slider__control_right')\r\n          ? 'right'\r\n          : 'left';\r\n        _transformItem(direction);\r\n        clearInterval(_interval);\r\n        _cycle(_config.direction);\r\n      }\r\n      if (e.target.getAttribute('data-slide-to')) {\r\n        e.preventDefault();\r\n        _slideTo(parseInt(e.target.getAttribute('data-slide-to')));\r\n        clearInterval(_interval);\r\n        _cycle(_config.direction);\r\n      }\r\n    };\r\n\r\n    var _handleVisibilityChange = function () {\r\n      if (document.visibilityState === 'hidden') {\r\n        clearInterval(_interval);\r\n      } else {\r\n        clearInterval(_interval);\r\n        _cycle(_config.direction);\r\n      }\r\n    };\r\n\r\n    var _refresh = function () {\r\n      clearInterval(_interval);\r\n      _mainElement.innerHTML = _html;\r\n      _sliderWrapper = _mainElement.querySelector('.slider__wrapper');\r\n      _sliderItems = _mainElement.querySelectorAll('.slider__item');\r\n      _sliderControls = _mainElement.querySelectorAll('.slider__control');\r\n      _sliderControlLeft = _mainElement.querySelector('.slider__control_left');\r\n      _sliderControlRight = _mainElement.querySelector(\r\n        '.slider__control_right',\r\n      );\r\n      _wrapperWidth = parseFloat(getComputedStyle(_sliderWrapper).width);\r\n      _itemWidth = parseFloat(getComputedStyle(_sliderItems[0]).width);\r\n      _positionLeftItem = 0;\r\n      _transform = 0;\r\n      _indexIndicator = 0;\r\n      _maxIndexIndicator = _sliderItems.length - 1;\r\n      _step = (_itemWidth / _wrapperWidth) * 100;\r\n      _items = [];\r\n      _sliderItems.forEach(function (item, index) {\r\n        _items.push({ item: item, position: index, transform: 0 });\r\n      });\r\n      _addIndicators();\r\n    };\r\n\r\n    var _setUpListeners = function () {\r\n      _mainElement.addEventListener('click', _controlClick);\r\n      if (_config.pause && _config.isCycling) {\r\n        _mainElement.addEventListener('mouseenter', function () {\r\n          clearInterval(_interval);\r\n        });\r\n        _mainElement.addEventListener('mouseleave', function () {\r\n          clearInterval(_interval);\r\n          _cycle(_config.direction);\r\n        });\r\n      }\r\n\r\n      document.addEventListener(\r\n        'visibilitychange',\r\n        _handleVisibilityChange,\r\n        false,\r\n      );\r\n      window.addEventListener('resize', function () {\r\n        var _index = 0,\r\n          width = parseFloat(document.body.clientWidth);\r\n        _states.forEach(function (item, index, arr) {\r\n          if (width >= _states[index].minWidth) _index = index;\r\n        });\r\n        if (_index !== _getActive()) {\r\n          _setActive();\r\n          _refresh();\r\n        }\r\n      });\r\n    };\r\n\r\n    var _addIndicators = function () {\r\n      var sliderIndicators = document.createElement('ol');\r\n      sliderIndicators.classList.add('slider__indicators');\r\n      for (var i = 0; i < _sliderItems.length; i++) {\r\n        var sliderIndicatorsItem = document.createElement('li');\r\n        if (i === 0) {\r\n          sliderIndicatorsItem.classList.add('active');\r\n        }\r\n        sliderIndicatorsItem.setAttribute('data-slide-to', i);\r\n        sliderIndicators.appendChild(sliderIndicatorsItem);\r\n      }\r\n      _mainElement.appendChild(sliderIndicators);\r\n      _indicatorItems = _mainElement.querySelectorAll(\r\n        '.slider__indicators > li',\r\n      );\r\n    };\r\n\r\n    // добавляем индикаторы\r\n    _addIndicators();\r\n    // инициализация\r\n    _setUpListeners();\r\n\r\n    if (document.visibilityState === 'visible') {\r\n      _cycle(_config.direction);\r\n    }\r\n    _setActive();\r\n\r\n    return {\r\n      right: function () {\r\n        _transformItem('right');\r\n      },\r\n      left: function () {\r\n        _transformItem('left');\r\n      },\r\n      stop: function () {\r\n        _config.isCycling = false;\r\n        clearInterval(_interval);\r\n      },\r\n      cycle: function () {\r\n        _config.isCycling = true;\r\n        clearInterval(_interval);\r\n        _cycle();\r\n      },\r\n    };\r\n  };\r\n})();\r\n\r\nvar slider = multiItemSlider('.slider', {\r\n  isCycling: true,\r\n});\r\n"]}